// Google Protocol Buffers used for RPCs between servers and clients.
syntax = "proto3";

message AppendEntries {
    bool is_request = 1;

    // Request fields
    int32 term = 2;
    int32 leader_id = 3;
}

message RequestVote {
    bool is_request = 1;

    // Request fields
    int32 term = 2;
    int32 candidate_id = 3;

    // Response fields
    bool vote_granted = 4;
}

message ClientRequest {
    // Request fields (client)
    string command = 1;
    string client_HostAndPort = 2; // so server knows who to repond to. 
                                  // will be removed after socket architecture change

    // Response fields (server)
    bool success = 4;
    int32 leader_id = 5;
    string output = 6;
}

message RPC {
    // Message instances
    AppendEntries AppendEntries_message = 1;
    RequestVote RequestVote_message = 2;
    ClientRequest ClientRequest_message = 3;
}

// For servers writing their persistent state variables to disk.
message ServerPersistentState {
    int32 current_term = 1;
    int32 term_voted = 2;
    int32 voted_for = 3;
}
